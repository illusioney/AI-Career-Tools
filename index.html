<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Career Tools - Resume, Cover Letter & Interview Prep</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-green { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .gradient-orange { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .gradient-blue { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15); }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .pulse-animation { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        function App() {
            const [currentFeature, setCurrentFeature] = useState('home');
            return (
                <div className="min-h-screen bg-gray-50">
                    <header className="gradient-bg text-white py-6 shadow-lg">
                        <div className="max-w-7xl mx-auto px-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-3 cursor-pointer" onClick={() => setCurrentFeature('home')}>
                                    <svg className="w-10 h-10" fill="currentColor" viewBox="0 0 24 24"><path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/></svg>
                                    <div><h1 className="text-2xl font-bold">AI Career Tools</h1><p className="text-sm opacity-90">Your Job Search Assistant</p></div>
                                </div>
                                {currentFeature !== 'home' && (<button onClick={() => setCurrentFeature('home')} className="bg-white text-purple-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition">â† Back to Home</button>)}
                            </div>
                        </div>
                    </header>
                    <main className="max-w-7xl mx-auto px-4 py-8">
                        {currentFeature === 'home' && <HomePage setCurrentFeature={setCurrentFeature} />}
                        {currentFeature === 'resume' && <ResumeAnalyzer />}
                        {currentFeature === 'coverletter' && <CoverLetterGenerator />}
                        {currentFeature === 'interview' && <InterviewPrep />}
                    </main>
                </div>
            );
        }

        function HomePage({ setCurrentFeature }) {
            return (<div className="fade-in"><div className="text-center mb-12"><h2 className="text-5xl font-bold text-gray-900 mb-4">Ace Your Job Search with AI</h2><p className="text-xl text-gray-600 max-w-3xl mx-auto">Professional tools powered by AI to help you land your dream job</p></div><div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12"><div className="bg-white p-8 rounded-2xl shadow-lg card-hover cursor-pointer" onClick={() => setCurrentFeature('resume')}><div className="gradient-bg w-16 h-16 rounded-xl flex items-center justify-center mb-6"><svg className="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg></div><h3 className="text-2xl font-bold text-gray-900 mb-3">Resume ATS Analyzer</h3><p className="text-gray-600 mb-4">Beat Applicant Tracking Systems with AI-powered analysis</p><button className="w-full gradient-bg text-white py-3 rounded-lg font-semibold hover:opacity-90 transition">Analyze Resume â†’</button></div><div className="bg-white p-8 rounded-2xl shadow-lg card-hover cursor-pointer" onClick={() => setCurrentFeature('coverletter')}><div className="gradient-green w-16 h-16 rounded-xl flex items-center justify-center mb-6"><svg className="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg></div><h3 className="text-2xl font-bold text-gray-900 mb-3">Cover Letter Generator</h3><p className="text-gray-600 mb-4">Create personalized, compelling cover letters in seconds</p><button className="w-full gradient-green text-white py-3 rounded-lg font-semibold hover:opacity-90 transition">Generate Cover Letter â†’</button></div><div className="bg-white p-8 rounded-2xl shadow-lg card-hover cursor-pointer" onClick={() => setCurrentFeature('interview')}><div className="gradient-orange w-16 h-16 rounded-xl flex items-center justify-center mb-6"><svg className="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg></div><h3 className="text-2xl font-bold text-gray-900 mb-3">Interview Prep</h3><p className="text-gray-600 mb-4">Practice with AI interviews - text or voice mode</p><button className="w-full gradient-orange text-white py-3 rounded-lg font-semibold hover:opacity-90 transition">Start Practice â†’</button></div></div></div>);
        }

        function ResumeAnalyzer() {
            const [step, setStep] = useState('upload');
            const [resumeText, setResumeText] = useState('');
            const [jobDescription, setJobDescription] = useState('');
            const [results, setResults] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const handleFileUpload = async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                if (file.type === 'application/pdf') {
                    try {
                        const arrayBuffer = await file.arrayBuffer();
                        const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                        let fullText = '';
                        for (let i = 1; i <= pdf.numPages; i++) {
                            const page = await pdf.getPage(i);
                            const textContent = await page.getTextContent();
                            const pageText = textContent.items.map(item => item.str).join(' ');
                            fullText += pageText + '\n';
                        }
                        setResumeText(fullText);
                        setError('');
                    } catch (err) {
                        setError('Error reading PDF. Please try copy-pasting your resume text instead.');
                    }
                } else if (file.type === 'text/plain') {
                    const text = await file.text();
                    setResumeText(text);
                    setError('');
                } else {
                    setError('Please upload a PDF or TXT file, or paste your resume text.');
                }
            };

            const analyzeResume = async () => {
                if (!resumeText.trim() || !jobDescription.trim()) {
                    setError('Please provide both resume and job description');
                    return;
                }
                setLoading(true);
                setStep('analyzing');
                setError('');
                try {
                    const response = await fetch('/api/analyze', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ resumeText, jobDescription })
                    });
                    if (!response.ok) {
                        const errorData = await response.json();
                        setError(`API Error: ${errorData.error}\n\nDetails: ${errorData.details}`);
                        setStep('upload');
                        setLoading(false);
                        return;
                    }
                    const analysis = await response.json();
                    setResults(analysis);
                    setStep('results');
                } catch (error) {
                    setError(`Analysis failed: ${error.message}`);
                    setStep('upload');
                } finally {
                    setLoading(false);
                }
            };

            const downloadReport = () => {
                const report = `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           RESUME ATS ANALYSIS REPORT                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š OVERALL ATS SCORE: ${results.score}/100

${results.score >= 80 ? 'âœ… EXCELLENT' : results.score >= 60 ? 'âš ï¸ GOOD' : 'âŒ NEEDS WORK'}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ˆ KEYWORD ANALYSIS
âœ… Matched: ${results.keywordMatch.matched.join(', ')}
âš ï¸ Missing: ${results.keywordMatch.missing.join(', ')}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ IMPROVEMENTS
${results.improvements.map((imp, i) => `${i + 1}. ${imp.title} [${imp.impact.toUpperCase()}]\n   ${imp.description}`).join('\n')}

Generated: ${new Date().toLocaleString()}
                `.trim();
                const blob = new Blob([report], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ATS_Report_${results.score}_${new Date().toISOString().split('T')[0]}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            if (step === 'analyzing') {
                return (<div className="flex flex-col items-center justify-center min-h-[400px] fade-in"><div className="pulse-animation mb-4"><svg className="w-20 h-20 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg></div><h2 className="text-2xl font-bold text-gray-900 mb-2">Analyzing Your Resume...</h2><p className="text-gray-600">This may take a few seconds</p></div>);
            }

            if (step === 'results' && results) {
                return (<div className="fade-in"><div className="bg-white p-8 rounded-2xl shadow-lg mb-8 text-center"><h3 className="text-xl font-semibold text-gray-700 mb-4">Your ATS Score</h3><div className="text-8xl font-bold mb-4" style={{color: results.score >= 80 ? '#10b981' : results.score >= 60 ? '#f59e0b' : '#ef4444'}}>{results.score}</div><p className="text-2xl font-semibold" style={{color: results.score >= 80 ? '#10b981' : results.score >= 60 ? '#f59e0b' : '#ef4444'}}>{results.score >= 80 ? 'Excellent!' : results.score >= 60 ? 'Good' : 'Needs Improvement'}</p></div><div className="bg-white p-8 rounded-2xl shadow-lg mb-8"><h3 className="text-2xl font-bold text-gray-900 mb-6">ğŸ’¡ Recommended Improvements</h3><div className="space-y-4">{results.improvements.map((imp, index) => (<div key={index} className="border-l-4 border-purple-500 pl-4 py-2"><div className="flex items-start justify-between mb-2"><h4 className="font-semibold text-gray-900">{index + 1}. {imp.title}</h4><span className={`px-3 py-1 rounded-full text-xs font-semibold ${imp.impact === 'high' ? 'bg-red-100 text-red-800' : imp.impact === 'medium' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}`}>{imp.impact.toUpperCase()} IMPACT</span></div><p className="text-gray-600">{imp.description}</p></div>))}</div></div><div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"><div className="bg-white p-8 rounded-2xl shadow-lg"><h3 className="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-2"><span>âœ…</span>Matched Keywords</h3><div className="flex flex-wrap gap-2">{results.keywordMatch.matched.map((kw, i) => (<span key={i} className="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">{kw}</span>))}</div></div><div className="bg-white p-8 rounded-2xl shadow-lg"><h3 className="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-2"><span>âš ï¸</span>Missing Keywords</h3><div className="flex flex-wrap gap-2">{results.keywordMatch.missing.map((kw, i) => (<span key={i} className="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">{kw}</span>))}</div></div></div><div className="bg-gradient-to-r from-purple-600 to-indigo-600 p-8 rounded-2xl shadow-lg text-white text-center"><h3 className="text-3xl font-bold mb-4">ğŸ“„ Download Your Full Report</h3><p className="text-lg mb-6 opacity-90">Get a detailed text report with all your analysis results - completely free!</p><button onClick={downloadReport} className="bg-white text-purple-600 px-8 py-3 rounded-lg font-bold text-lg hover:bg-gray-100 transition transform hover:scale-105">ğŸ“¥ Download Full Report - FREE</button></div></div>);
            }

            return (<div className="fade-in"><div className="text-center mb-12"><h2 className="text-4xl font-bold text-gray-900 mb-4">Resume ATS Analyzer</h2><p className="text-xl text-gray-600 max-w-2xl mx-auto">Upload your resume and job description to get instant AI-powered feedback</p></div>{error && (<div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 whitespace-pre-wrap">{error}</div>)}<div className="grid grid-cols-1 lg:grid-cols-2 gap-8"><div className="bg-white p-8 rounded-xl shadow-lg"><h3 className="text-2xl font-bold text-gray-900 mb-4">ğŸ“„ Your Resume</h3><input type="file" accept=".pdf,.txt" onChange={handleFileUpload} className="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 cursor-pointer mb-4" /><p className="text-center text-gray-500 my-4">OR</p><textarea value={resumeText} onChange={(e) => setResumeText(e.target.value)} placeholder="Paste your resume text here..." className="w-full h-64 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" /></div><div className="bg-white p-8 rounded-xl shadow-lg"><h3 className="text-2xl font-bold text-gray-900 mb-4">ğŸ’¼ Job Description</h3><textarea value={jobDescription} onChange={(e) => setJobDescription(e.target.value)} placeholder="Paste the job description here..." className="w-full h-80 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" /></div></div><div className="mt-8 text-center"><button onClick={analyzeResume} disabled={loading} className="gradient-bg text-white px-12 py-4 rounded-lg font-bold text-lg hover:opacity-90 transition disabled:opacity-50">{loading ? 'Analyzing...' : 'Analyze My Resume'}</button></div></div>);
        }

        function CoverLetterGenerator() {
            const [resumeText, setResumeText] = useState('');
            const [jobDescription, setJobDescription] = useState('');
            const [coverLetter, setCoverLetter] = useState('');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const generateCoverLetter = async () => {
                if (!resumeText.trim() || !jobDescription.trim()) {
                    setError('Please provide both your resume and job description');
                    return;
                }
                setLoading(true);
                setError('');
                try {
                    const response = await fetch('/api/cover-letter', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ resumeText, jobDescription })
                    });
                    if (!response.ok) {
                        const errorData = await response.json();
                        setError(`Error: ${errorData.error}\n\nDetails: ${errorData.details}`);
                        return;
                    }
                    const data = await response.json();
                    setCoverLetter(data.coverLetter);
                } catch (error) {
                    setError(`Failed to generate cover letter: ${error.message}`);
                } finally {
                    setLoading(false);
                }
            };

            const copyCoverLetter = () => {
                navigator.clipboard.writeText(coverLetter);
                alert('Cover letter copied to clipboard!');
            };

            const downloadCoverLetter = () => {
                const blob = new Blob([coverLetter], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Cover_Letter_${new Date().toISOString().split('T')[0]}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            return (<div className="fade-in"><div className="text-center mb-12"><h2 className="text-4xl font-bold text-gray-900 mb-4">AI Cover Letter Generator</h2><p className="text-xl text-gray-600 max-w-2xl mx-auto">Create a personalized cover letter tailored to any job posting</p></div>{error && (<div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 whitespace-pre-wrap">{error}</div>)}{!coverLetter ? (<div><div className="grid grid-cols-1 lg:grid-cols-2 gap-8"><div className="bg-white p-8 rounded-xl shadow-lg"><h3 className="text-2xl font-bold text-gray-900 mb-4">ğŸ“„ Your Resume/Background</h3><textarea value={resumeText} onChange={(e) => setResumeText(e.target.value)} placeholder="Paste your resume or key accomplishments here..." className="w-full h-80 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" /></div><div className="bg-white p-8 rounded-xl shadow-lg"><h3 className="text-2xl font-bold text-gray-900 mb-4">ğŸ’¼ Job Description</h3><textarea value={jobDescription} onChange={(e) => setJobDescription(e.target.value)} placeholder="Paste the job description here..." className="w-full h-80 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" /></div></div><div className="mt-8 text-center"><button onClick={generateCoverLetter} disabled={loading} className="gradient-green text-white px-12 py-4 rounded-lg font-bold text-lg hover:opacity-90 transition disabled:opacity-50">{loading ? 'Generating...' : 'âœ¨ Generate Cover Letter'}</button></div></div>) : (<div className="bg-white p-8 rounded-xl shadow-lg"><div className="flex justify-between items-center mb-6"><h3 className="text-2xl font-bold text-gray-900">âœ‰ï¸ Your Cover Letter</h3><div className="space-x-4"><button onClick={copyCoverLetter} className="bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition">ğŸ“‹ Copy</button><button onClick={downloadCoverLetter} className="gradient-green text-white px-4 py-2 rounded-lg hover:opacity-90 transition">ğŸ“¥ Download</button><button onClick={() => {setCoverLetter('');setResumeText('');setJobDescription('');}} className="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">ğŸ”„ Generate New</button></div></div><div className="prose max-w-none whitespace-pre-wrap p-6 bg-gray-50 rounded-lg border border-gray-200">{coverLetter}</div></div>)}</div>);
        }

        function InterviewPrep() {
            const [mode, setMode] = useState(null);
            const [jobDescription, setJobDescription] = useState('');
            const [questions, setQuestions] = useState([]);
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [userAnswer, setUserAnswer] = useState('');
            const [feedback, setFeedback] = useState('');
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');
            const [isRecording, setIsRecording] = useState(false);
            const [transcript, setTranscript] = useState('');

            const generateQuestions = async () => {
                if (!jobDescription.trim()) {
                    setError('Please provide a job description');
                    return;
                }
                setLoading(true);
                setError('');
                try {
                    const response = await fetch('/api/interview-questions', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ jobDescription })
                    });
                    if (!response.ok) {
                        const errorData = await response.json();
                        setError(`Error: ${errorData.error}`);
                        return;
                    }
                    const data = await response.json();
                    setQuestions(data.questions);
                    setCurrentQuestionIndex(0);
                } catch (error) {
                    setError(`Failed to generate questions: ${error.message}`);
                } finally {
                    setLoading(false);
                }
            };

            const submitAnswer = async () => {
                const answer = mode === 'voice' ? transcript : userAnswer;
                if (!answer.trim()) {
                    setError('Please provide an answer');
                    return;
                }
                setLoading(true);
                setError('');
                try {
                    const response = await fetch('/api/interview-feedback', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ question: questions[currentQuestionIndex], answer })
                    });
                    if (!response.ok) {
                        const errorData = await response.json();
                        setError(`Error: ${errorData.error}`);
                        return;
                    }
                    const data = await response.json();
                    setFeedback(data.feedback);
                } catch (error) {
                    setError(`Failed to get feedback: ${error.message}`);
                } finally {
                    setLoading(false);
                }
            };

            const nextQuestion = () => {
                if (currentQuestionIndex < questions.length - 1) {
                    setCurrentQuestionIndex(currentQuestionIndex + 1);
                    setUserAnswer('');
                    setTranscript('');
                    setFeedback('');
                }
            };

            const startRecording = () => {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    const recognition = new SpeechRecognition();
                    recognition.continuous = true;
                    recognition.interimResults = true;
                    recognition.onresult = (event) => {
                        let final = '';
                        for (let i = event.resultIndex; i < event.results.length; i++) {
                            if (event.results[i].isFinal) {
                                final += event.results[i][0].transcript;
                            }
                        }
                        if (final) setTranscript(prev => prev + ' ' + final);
                    };
                    recognition.start();
                    setIsRecording(true);
                    window.currentRecognition = recognition;
                } else {
                    setError('Voice recognition not supported. Please use Chrome or Edge.');
                }
            };

            const stopRecording = () => {
                if (window.currentRecognition) {
                    window.currentRecognition.stop();
                    setIsRecording(false);
                }
            };

            if (!mode) {
                return (<div className="fade-in"><div className="text-center mb-12"><h2 className="text-4xl font-bold text-gray-900 mb-4">Interview Practice</h2><p className="text-xl text-gray-600 max-w-2xl mx-auto">Choose your practice mode</p></div><div className="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto"><div className="bg-white p-8 rounded-2xl shadow-lg card-hover cursor-pointer" onClick={() => setMode('text')}><div className="gradient-orange w-16 h-16 rounded-xl flex items-center justify-center mb-6 mx-auto"><svg className="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg></div><h3 className="text-2xl font-bold text-gray-900 mb-3 text-center">Text Mode</h3><p className="text-gray-600 mb-6 text-center">Type your answers and get detailed feedback</p><button className="w-full gradient-orange text-white py-3 rounded-lg font-semibold hover:opacity-90 transition">Start Text Practice â†’</button></div><div className="bg-white p-8 rounded-2xl shadow-lg card-hover cursor-pointer" onClick={() => setMode('voice')}><div className="gradient-blue w-16 h-16 rounded-xl flex items-center justify-center mb-6 mx-auto"><svg className="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg></div><h3 className="text-2xl font-bold text-gray-900 mb-3 text-center">Voice Mode</h3><p className="text-gray-600 mb-6 text-center">Speak your answers for realistic simulation</p><button className="w-full gradient-blue text-white py-3 rounded-lg font-semibold hover:opacity-90 transition">Start Voice Practice â†’</button></div></div></div>);
            }

            if (questions.length === 0) {
                return (<div className="fade-in"><div className="text-center mb-12"><h2 className="text-4xl font-bold text-gray-900 mb-4">{mode === 'text' ? 'ğŸ“ Text Interview Practice' : 'ğŸ¤ Voice Interview Practice'}</h2><p className="text-xl text-gray-600 max-w-2xl mx-auto">Provide a job description to get started</p></div>{error && (<div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 whitespace-pre-wrap">{error}</div>)}<div className="max-w-3xl mx-auto"><div className="bg-white p-8 rounded-xl shadow-lg"><h3 className="text-2xl font-bold text-gray-900 mb-4">ğŸ’¼ Job Description</h3><textarea value={jobDescription} onChange={(e) => setJobDescription(e.target.value)} placeholder="Paste the job description for the role you're interviewing for..." className="w-full h-80 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent mb-6" /><button onClick={generateQuestions} disabled={loading} className="w-full gradient-orange text-white py-4 rounded-lg font-bold text-lg hover:opacity-90 transition disabled:opacity-50">{loading ? 'Generating Questions...' : 'âœ¨ Generate Interview Questions'}</button></div></div></div>);
            }

            return (<div className="fade-in"><div className="max-w-4xl mx-auto"><div className="mb-6 flex justify-between items-center"><h2 className="text-2xl font-bold text-gray-900">Question {currentQuestionIndex + 1} of {questions.length}</h2><button onClick={() => {setQuestions([]);setJobDescription('');setMode(null);}} className="text-gray-600 hover:text-gray-900">â† Start Over</button></div>{error && (<div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6">{error}</div>)}<div className="bg-white p-8 rounded-xl shadow-lg mb-6"><h3 className="text-xl font-bold text-gray-900 mb-4">â“ Question:</h3><p className="text-lg text-gray-700">{questions[currentQuestionIndex]}</p></div>{mode === 'text' ? (<div className="bg-white p-8 rounded-xl shadow-lg mb-6"><h3 className="text-xl font-bold text-gray-900 mb-4">ğŸ“ Your Answer:</h3><textarea value={userAnswer} onChange={(e) => setUserAnswer(e.target.value)} placeholder="Type your answer here..." className="w-full h-40 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" /></div>) : (<div className="bg-white p-8 rounded-xl shadow-lg mb-6"><h3 className="text-xl font-bold text-gray-900 mb-4">ğŸ¤ Voice Answer:</h3><div className="text-center mb-4">{!isRecording ? (<button onClick={startRecording} className="bg-red-500 hover:bg-red-600 text-white w-20 h-20 rounded-full flex items-center justify-center mx-auto transition"><svg className="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clipRule="evenodd" /></svg></button>) : (<button onClick={stopRecording} className="bg-gray-500 hover:bg-gray-600 text-white w-20 h-20 rounded-full flex items-center justify-center mx-auto pulse-animation transition"><svg className="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"><path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clipRule="evenodd" /></svg></button>)}<p className="text-sm text-gray-600 mt-2">{isRecording ? 'Click to stop recording' : 'Click to start recording'}</p></div>{transcript && (<div className="p-4 bg-gray-50 rounded-lg border border-gray-200"><p className="text-gray-700">{transcript}</p></div>)}</div>)}{!feedback ? (<button onClick={submitAnswer} disabled={loading || (mode === 'text' ? !userAnswer.trim() : !transcript.trim())} className="w-full gradient-orange text-white py-4 rounded-lg font-bold text-lg hover:opacity-90 transition disabled:opacity-50 mb-6">{loading ? 'Getting Feedback...' : 'Submit Answer & Get Feedback'}</button>) : (<div><div className="bg-white p-8 rounded-xl shadow-lg mb-6"><h3 className="text-xl font-bold text-gray-900 mb-4">ğŸ’¬ AI Feedback:</h3><div className="prose max-w-none whitespace-pre-wrap text-gray-700">{feedback}</div></div>{currentQuestionIndex < questions.length - 1 ? (<button onClick={nextQuestion} className="w-full gradient-orange text-white py-4 rounded-lg font-bold text-lg hover:opacity-90 transition">Next Question â†’</button>) : (<div className="text-center"><p className="text-2xl font-bold text-gray-900 mb-4">ğŸ‰ Interview Complete!</p><button onClick={() => {setQuestions([]);setJobDescription('');setMode(null);}} className="gradient-orange text-white px-8 py-3 rounded-lg font-bold hover:opacity-90 transition">Start New Practice Session</button></div>)}</div>)}</div></div>);
        }

        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
